
# Config files describe a few things:
#   -   Info about the package being installed.
#   -   Info about the environment being installed into.
#   -   Some things being "overrideable"
#   -   How to snapshot an installed version so it can be brought up next time easily instead of a full bootstrap

appliance = {
    'name': "redmine",
    'version': "4.0",
    'download_url': "https://www.redmine.org/releases/redmine-4.0.0.tar.gz",

    # Regardless of the provider we want to do common things on resources in each arena
    # This tells us what should be in each of the resources.  The "key" (eg web) corresponds
    # to the kind of instance that is provisioned above
    "resources": [
        {
            # All things required to setup a DB given a "logical" instance
            'name': "db"
        },
        {
            # Web/Application resources
            'name': "web",
            'providers': {
                'aws': {
                    # Ubuntu 18.04 LTS
                    "ami": "ami-0bbe6b35405ecebdb",

                    # Name of the key pair
                    "key_name": "redmine-ec2-keypair",

                    # Where we will look for or write a new key pair to for an instance being created
                    "key_file": "~/.liftoff/keyfiles/redmine/redmine-ec2-keypair.pem",
                
                    "instance_type": "t1.micro",

                    "security_group": {
                        "name": "vm_launcher_group",
                    },

                    "ssh_user": "ubuntu"
                },
            },
            'bootstrap': "./bootstrap.py"
        }
    ]
}
